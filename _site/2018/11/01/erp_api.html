<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>TbT ERP API | TbT Platform Docs</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="TbT ERP API" />
<meta name="author" content="MelKori" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="TbT Docs at GitHub Pages." />
<meta property="og:description" content="TbT Docs at GitHub Pages." />
<link rel="canonical" href="http://localhost:4000/2018/11/01/erp_api.html" />
<meta property="og:url" content="http://localhost:4000/2018/11/01/erp_api.html" />
<meta property="og:site_name" content="TbT Platform Docs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-01T01:00:00+02:00" />
<script type="application/ld+json">
{"description":"TbT Docs at GitHub Pages.","author":{"@type":"Person","name":"MelKori"},"@type":"BlogPosting","url":"http://localhost:4000/2018/11/01/erp_api.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/logo.png"},"name":"MelKori"},"headline":"TbT ERP API","dateModified":"2018-11-01T01:00:00+02:00","datePublished":"2018-11-01T01:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/11/01/erp_api.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=4354cebd9a0dc293bc6d3ed7fe4d9c69fbc758f3">
    <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">TbT Platform Docs</a></h1>

        
          <img src="/images/logo.png" alt="Logo" />
        

        <p>TbT Docs at GitHub Pages.</p>

        
        <p class="view"><a href="http://github.com/blackforest6230/tbt-post.github.io">View the Project on GitHub <small>blackforest6230/tbt-post.github.io</small></a></p>
        

        

        
        <ul class="downloads">
          <li><a href="https://github.com/tbt-post/tbtapi-docs/zipball/master/">Download docs<strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/tbt-post/tbtapi-docs/tarball/master/">Download docs<strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/tbt-post/tbtapi-docs">View docs on <strong>GitHub</strong></a></li>
        </ul>
        
      </header>
      <section>

      <h1>TbT ERP API</h1>
<p>01 Nov 2018 - MelKori</p>

<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Общая-информация">Общая информация</a>
<ul class="sectlevel2">
<li><a href="#Формат-url-для-отправки-запросов-к-api">Формат URL для отправки запросов к API</a></li>
</ul>
</li>
<li><a href="#api">API</a>
<ul class="sectlevel2">
<li><a href="#Посылки">Посылки</a>
<ul class="sectlevel3">
<li><a href="#Создание-посылки">Создание посылки</a></li>
<li><a href="#Получение-по-idcode">Получение по id/code</a></li>
<li><a href="#Получение-cписка-посылок-по-списку-id">Получение cписка посылок по списку id</a></li>
<li><a href="#Получение-cписка-посылок-по-участию">Получение cписка посылок по участию</a></li>
<li><a href="#Получение-кодов">Получение кодов</a></li>
<li><a href="#Состояние-посылки">Состояние посылки</a></li>
<li><a href="#История-изменения-состояний">История изменения состояний</a></li>
<li><a href="#История-изменения-состояний-всех-посылок">История изменения состояний всех посылок</a></li>
<li><a href="#Модификация-зарегистрированой-посылки">Модификация зарегистрированой посылки</a></li>
<li><a href="#Запрос-на-изменение-посылки-после-принятия-к-доставке">Запрос на изменение посылки после принятия к доставке</a></li>
<li><a href="#Подтверждение-платежа">Подтверждение платежа</a></li>
<li><a href="#Установка-времени-хранения-посылки-на-отделении">Установка времени хранения посылки на отделении</a></li>
<li><a href="#Пометка-посылки-к-отмене-на-отделении">Пометка посылки к отмене на отделении</a></li>
<li><a href="#Проверка-условий-доставки-для-посылки-перед-регистрацией">Проверка условий доставки для посылки перед регистрацией</a></li>
</ul>
</li>
<li><a href="#Отделения-и-адреса">Отделения и адреса</a>
<ul class="sectlevel3">
<li><a href="#Получения-данных-отделений">Получения данных отделений</a></li>
<li><a href="#Получение-данных-адреса-из-справочника">Получение данных адреса из справочника</a></li>
</ul>
</li>
<li><a href="#Пользователи">Пользователи</a>
<ul class="sectlevel3">
<li><a href="#Регистрация-пользователя">Регистрация пользователя</a></li>
<li><a href="#Поиск-пользователя">Поиск пользователя</a></li>
</ul>
</li>
<li><a href="#Контрагенты">Контрагенты</a>
<ul class="sectlevel3">
<li><a href="#Регистрация-контрагента">Регистрация контрагента</a></li>
<li><a href="#Модификация-контрагента">Модификация контрагента</a></li>
<li><a href="#Информация-о-контрагенте">Информация о контрагенте</a></li>
<li><a href="#Справочник-контрагентов">Справочник контрагентов</a></li>
</ul>
</li>
<li><a href="#Финансовые-транзакции">Финансовые транзакции</a>
<ul class="sectlevel3">
<li><a href="#Получение-финансовой-транзакции-по-id">Получение финансовой транзакции по id</a></li>
<li><a href="#Получение-списка-финансовых-транзакций-за-период">Получение списка финансовых транзакций за период</a></li>
<li><a href="#Получение-списка-финансовых-транзакций-по-посылке">Получение списка финансовых транзакций по посылке</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Общая-информация">Общая информация</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Агентский API предназначен для интеграции ERP систем бизнес-агентов в сервисы TbT.</p>
</div>
<div class="paragraph">
<p>Для подключения к системе необходимо:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>иметь регистрационную запись в системе с установленным признаком <strong>agent</strong></p>
</li>
<li>
<p>ID учетной записи агента (UUID)</p>
</li>
<li>
<p>Уникальный токен и пароль (или одноразовый сессионный код) для клиентского подключения (передаются в заголовке для Basic Auth)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>К агентскому токену могут добавляться ограничения на некоторые общие типы операций: <code>create</code>, <code>update</code>, <code>notify</code></p>
</div>
<div class="paragraph">
<p>При подключении в индифидуальном профиле создается реестр правил/классификатор обработки ТТН для каждой группы агентов (agent class) в зависимости от особенностей их данных, чтобы облегчить интеграцию.</p>
</div>
<div class="sect2">
<h3 id="Формат-url-для-отправки-запросов-к-api">Формат URL для отправки запросов к API</h3>
<div class="literalblock">
<div class="content">
<pre>https://api.tbt-post.net/api/v{v_number}/{method_name}/{method_params}?{get_params}</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">где</dt>
</dl>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
{v_number}
</td>
<td class="hdlist2">
<p>номер версии API в виде числа</p>
</td>
</tr>
<tr>
<td class="hdlist1">
{method_name}
</td>
<td class="hdlist2">
<p>название метода</p>
</td>
</tr>
<tr>
<td class="hdlist1">
{method_params}
</td>
<td class="hdlist2">
<p>параметры метода в URI</p>
</td>
</tr>
<tr>
<td class="hdlist1">
{get_params}
</td>
<td class="hdlist2">
<p>опциональные GET параметры</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Для проверки запросов в командной строке/терминале, используйте User-Agent: curl, <strong>не ниже 7.47.0</strong></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api">API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Посылки">Посылки</h3>
<div class="sect3">
<h4 id="Создание-посылки">Создание посылки</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>POST</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>new</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{"order_id": "&lt;EXT Order ID&gt;", "receiver": { "id": "&lt;EXT User ID&gt;", "phone": &lt;PHONE 380XXYYYYYYY&gt;, "email" : "&lt;USER EMAIL&gt;", "first name" : &lt;FIRST NAME&gt;, "last_name": "&lt;LAST NAME&gt;"}, "delivery_type": &lt;DELIVERY TYPE&gt;, "dest" : [ &lt;LATITUDE&gt;, &lt;LONGITUDE&gt;], "dest_apartment": "&lt;DEST APARTMENT&gt;", "weight" : &lt;WEIGHT GRAM as INTEGER&gt;, "price" : &lt;PRICE as DECIMAL(10,2)&gt;, "cod_amount" : &lt;PRICE as DECIMAL(10,2)&gt;, "type" : "&lt;TYPE CODE&gt;:&lt;CLASS CODE&gt;", "note" : "&lt;USER NOTE&gt;", "created_at": "&lt;DATE TIME in ISO 8601&gt;", "contragent_id" : &lt;CONTRAGENT ID&gt;, "dimensions": [&lt;WIDTH&gt;, &lt;HEIGHT&gt;, &lt;DEPTH&gt;], "_comment" : "&lt;SENDER&#8217;s comment&gt;", "items": [&lt;PARCEL ITEM SPEC&gt;, &#8230;&#8203;]}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"id" : "&lt;PARSEL ID&gt;", "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
описание <code>PARCEL_ITEM_SPEC</code>: {"barcode": "&lt;UNIQ BARCODE&gt;", "sku": "&lt;SUPPLIER SKU NAME&gt;", "name": "&lt;NAME&gt;", "brand": "&lt;BRAND&gt;", "size": "&lt;SIZE&gt;", "quantity": &lt;QUANTITY as INTEGER&gt;, "weight": &lt;WEIGHT GRAM as INTEGER&gt;, "price": &lt;PRICE as DECIMAL(10,2)&gt;, "comment": "&lt;OPTIONAL COMMENT&gt;", "photo": "&lt;OPTIONAL PHOTO&gt;"}
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
ключи <code>cod_amount</code>, <code>contragent_id</code>, <code>dimensions</code>, <code>_comment</code>, <code>items</code>&#8201;&#8212;&#8201;опциональны.<br>
<code>contragent_id</code> - необходимо указывать если в <code>type=COD</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Для посылок с классификатором оплаты <code>COD</code> в качестве значения <code>cod_amount</code> будет подставляться параметр <code>price</code> в случае отсутствия явного его указания в параметрах. <code>cod_amount</code> не может быть больше чем <code>price</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
параметр <code>delivery_type</code> имеет значение по-умолчанию <strong>W2W</strong>, в случае значений <strong>W2D</strong> и <strong>D2D</strong> необходимо передать ключ <code>dest_apartment</code>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X POST "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/new" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"order_id": "TEST0001", "receiver": { "id": 0, "phone": "380662225577", "email" : "example@gmail.com", "first_name" : "test", "last_name": "user"}, "delivery_type": "W2W", "dest" : ["50.405237", "30.679338"], "dest_apartment": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253", "weight" : 1520, "price" : 2500, "cod_amount" : 0, "type" : "fragile:A.PRP.NR.NA.S000", "note" : "", "created_at": "2018-12-11T11:45:00+00:00"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>В параметрах "Authorization" Необходимо указать токен и пароль в формате base64.<br>
Например: <code>token:passwd &#8594; dG9rZW46cGFzc3dk</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Tue, 11 Dec 2018 10:32:02 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 63<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "id": "252395d6-5764-4232-baeb-2020db2d8c2c",
  "success": true
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
При повторном отправлении запроса с такими же параметрами, сервер ответит ошибкой "409" и сообщением "{"message": "Order TEST0001 already registered", "success": false}"
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Получение-по-idcode">Получение по id/code</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>&lt;code&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "address_id": "&lt;SHIPPING ADDRESS ID&gt;", "code": "&lt;CODE-128&gt;", "is_paid": &lt;true/false&gt;, "weight": &lt;WEIGHT GRAM as DECIMAL(10,6)&gt;, "agent": "&lt;USER ID&gt;", "is_open": &lt;true/false&gt;, "paid_at": "&lt;TIMESTAMP UTC&gt; or null", "closed_at": "&lt;TIMESTAMP UTC or null&gt;", "id": "&lt;PARCEL ID&gt;", "type": &lt;TYPE CODE&gt;, "parent": &lt;PARCEL ID or null&gt;, "price": &lt;PRICE as DECIMAL(10,2)&gt;, "cod_amount": &lt;PRICE as DECIMAL(10,2)&gt;, "paid_amount": &lt;PAYMENTS TOTAL as DECIMAL(10,2)&gt;, "class": "&lt;CLASS ID&gt;", "sender": "&lt;USER ID&gt;", "created_at": "&lt;TIMESTAMP UTC&gt;", "modified_at": "&lt;TIMESTAMP UTC&gt;", "receiver": "&lt;USER ID&gt;", "state": "&lt;PARCEL STATE&gt;", "transfer_via": "&lt;OFFCIE ID&gt;", "pentity": "&lt;OFFICE ENTITY ID&gt;", "additional_data": {&#8230;&#8203;}, "delivery_type": "&lt;DELIVERY TYPE&gt;" &#8230;&#8203;}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
<code>parcel_id</code> имеет более высокий приоритет, чем <code>code</code>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/252395d6-5764-4232-baeb-2020db2d8c2c" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Tue, 11 Dec 2018 13:08:05 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 1114<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "ea3c10b5aa787248012184e6befffbf7732930d0"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "address_id": "f50a7aaa-8a1d-11e6-8a66-83b0de5b609d",
  "code": "TEST0001",
  "weight": 1520,
  "agent": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
  "is_dirty": false,
  "is_open": true,
  "paid_at": null,
  "closed_at": null,
  "id": "252395d6-5764-4232-baeb-2020db2d8c2c",
  "paid_amount": 0,
  "state": "PU0000",
  "mark": null,
  "last_seen_at": null,
  "type": "fragile",
  "delivery_type": "W2W",
  "parent": null,
  "price": 2500,
  "checked_in_at": null,
  "class": "A.PRP.NR.NA.S000",
  "pentity": null,
  "transfer_via": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253",
  "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
  "nsid": 0,
  "is_paid": false,
  "modified_at": "2018-12-11T10:32:02.238182+00:00",
  "success": true,
  "additional_data": {
    "erp_token": "token",
    "ttl_days": 15,
    "ttl_days_default": 15,
    "_receiver": {
      "phone": "380662225577",
      "first_name": "test",
      "last_name": "user",
      "id": 0,
      "email": "example@gmail.com"
    }
  },
  "receiver": "67719cba-5cd5-4dd0-84c9-6b6864a75066",
  "cod_amount": 0,
  "created_at": "2018-12-11T10:32:02.238169+00:00",
  "goes_back": false
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Получение-cписка-посылок-по-списку-id">Получение cписка посылок по списку id</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>POST</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/list</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>&lt;code&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{"id": ["&lt;PARCEL ID&gt;", "&lt;PARCEL ID&gt;", &#8230;&#8203;]}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "parcels": [{&lt;PARCEL SPEC&gt;}, {&lt;PARCEL SPEC&gt;}, &#8230;&#8203;]}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X POST "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/list" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"id": ["252395d6-5764-4232-baeb-2020db2d8c2c", "4d52c496-9137-4e8a-bb1b-56f378669ac0"]}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Tue, 11 Dec 2018 14:24:13 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 2228<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "parcels": [
    {
      "address_id": "f50a7aaa-8a1d-11e6-8a66-83b0de5b609d",
      "code": "TEST0001",
      "weight": 1520,
      "agent": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "is_dirty": false,
      "is_open": true,
      "paid_at": null,
      "closed_at": null,
      "id": "252395d6-5764-4232-baeb-2020db2d8c2c",
      "paid_amount": 0,
      "state": "PU0000",
      "mark": null,
      "last_seen_at": null,
      "type": "fragile",
      "delivery_type": "W2W",
      "parent": null,
      "price": 2500,
      "checked_in_at": null,
      "class": "A.PRP.NR.NA.S000",
      "pentity": null,
      "transfer_via": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253",
      "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "nsid": 0,
      "is_paid": false,
      "modified_at": "2018-12-11T10:32:02.238182+00:00",
      "additional_data": {
        "erp_token": "token",
        "_receiver": {
          "phone": "380662225577",
          "first_name": "test",
          "last_name": "user",
          "id": 0,
          "email": "example@gmail.com"
        },
        "ttl_days": 15,
        "ttl_days_default": 15
      },
      "receiver": "67719cba-5cd5-4dd0-84c9-6b6864a75066",
      "cod_amount": 0,
      "created_at": "2018-12-11T10:32:02.238169+00:00",
      "goes_back": false
    },
    {
      "address_id": "f50a7aaa-8a1d-11e6-8a66-83b0de5b609d",
      "code": "TEST0002",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "created_at": "2018-12-11T14:23:51.628901+00:00",
      "goes_back": false
    }
  ],
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Получение-cписка-посылок-по-участию">Получение cписка посылок по участию</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/list</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>participant = all|agent|sender|receiver, sort_by = &lt;SORT FIELD&gt;, [sort_order = desc|asc], [limit=20, offset=0]</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"total": &lt;INTEGER TOTAL&gt;, "parcels": [{&lt;PARCEL SPEC&gt;}, {&lt;PARCEL SPEC&gt;}, &#8230;&#8203;], "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
По-умолчанию выполняется поиск всех посылок <code>participant=all</code>, порядок сортировки по-убыванию по состояниям. В качестве sort_by можно передать такие поля: [code, weight, price, paid_amount, created_at, modified_at, paid_at, type, class, state, goes_back]
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Параметры в GET запросах необходимо перечислять через символ <code>&amp;</code><br>
Параметры в [] - опциональны
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/list?participant=agent&amp;sort_by=type&amp;sort_order=asc&amp;limit=20&amp;offset=0" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 10:22:47 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 3337<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "35c21fc7f5e3aa7aecbdc4389aa4b8097372f81c"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "total": 3,
  "parcels": [
    {
      "address_id": "f50a7aaa-8a1d-11e6-8a66-83b0de5b609d",
      "code": "TEST0003",
      "weight": 145,
      "agent": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "is_dirty": false,
      "is_open": true,
      "paid_at": null,
      "closed_at": null,
      "id": "0e1837e3-609f-4bc6-a121-3b21c0f11a5b",
      "paid_amount": 0,
      "state": "PU0000",
      "mark": null,
      "last_seen_at": null,
      "type": "fragile",
      "delivery_type": "W2W",
      "parent": null,
      "price": 125,
      "checked_in_at": null,
      "class": "A.PRP.NR.NA.S000",
      "pentity": null,
      "transfer_via": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253",
      "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "nsid": 0,
      "is_paid": false,
      "modified_at": "2018-12-12T10:19:42.207810+00:00",
      "additional_data": {
        "erp_token": "510ad08a-830e-46aa-ab63-dfade75a00a7",
        "_receiver": {
          "phone": "380662225577",
          "first_name": "test",
          "last_name": "user",
          "id": 0,
          "email": "example@gmail.com"
        },
        "ttl_days": 15,
        "ttl_days_default": 15
      },
      "receiver": "67719cba-5cd5-4dd0-84c9-6b6864a75066",
      "cod_amount": 0,
      "created_at": "2018-12-12T10:19:42.207796+00:00",
      "goes_back": false
    },
    {
      "address_id": "f50a7aaa-8a1d-11e6-8a66-83b0de5b609d",
      "code": "TEST0002",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "created_at": "2018-12-11T14:23:51.628901+00:00",
      "goes_back": false
    },
    {
      "address_id": "f50a7aaa-8a1d-11e6-8a66-83b0de5b609d",
      "code": "TEST0001",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "PARCEL SPEC",
      "created_at": "2018-12-11T10:32:02.238169+00:00",
      "goes_back": false
    }
  ],
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Получение-кодов">Получение кодов</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/codes</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"qr": "&lt;QR body&gt;", "bcode": "&lt;CODE128&gt;", "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/codes/4d52c496-9137-4e8a-bb1b-56f378669ac0" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 10:49:02 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 4040<br>
Connection: keep-alive
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "2b06b6d02fb247c191d703bb325ca1173138a2bd"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "qr": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAACyAQAAAADO8ajFAAAE9klEQVR4nNVXz4fl1xKv7ro8TY0aZvUITxjeqqlWTQxnVG8fTf6GEN52yCpkE7J9hLcaQv6JkNVwWg0jnOtcejU0EYaswmnn0oa6KvuYe2b73ndZPj4+p+pTP74nCR/6bk4/GAb434ufbG5gu7+4fL2Fy93F9vkF3J9cHcVD2kzpYEoZrbA1G5pWj+NFYXD1rpXnyJRExY/graQgzvQ6baCv8BsA0K3CzvaPujyy76/GJ+8er97L9TD3FwZv84u3tpPd3R8Qx/EneYLyl9hhZ98e15/JgNUKBjYrzKNa5lH9p3Cxedef4Q0UfLW/eVOfXsP95rgeyOzRZEy1UOaEIVj9OD+kj+iDWKq2mZTUs41V/iMiHIAyfNbRRafiih+d2aYnSyP1FjLW/NamVVRlQx6TsxAv+dUdc7QiHk6UVD14xQ+cnjxrrz2nNnFAWPEXt5jQB5hW66hZmqzwPUCbhvamXSqnGC/zz97KHFCGxjCs0j3myg/w7Kvb7Z29/sfZZ7++qsSfnl3uVn6Q2pUkajcHLRPIC630TJrQU91HcgB1YY1lP6I4QiWp4eJTEput8JMFotPMhoa1tJk8V/gK6OpAU9PBYKSDLfWbyWCD5mgGvWna2j8KA1WlS1YFIQ1d1PcUiOj6jwPhpz88fkFwp98/odvVPEQgagHGMjowysf0a8PGMcFqS1WOSiGr/BCgaPbpNls1KhXX7+VGOQBpVjAaLWuWsXqv7J9e7Pzgb7/Jb//568ONbeB65TdOKzZH1Tp6KUqTaOkf9jJkAHWzhp7R/CP1ChvNlAXrNCgMSbriVy/dgA3LDOsK3cuiH0/hP9coYOeH9w/bN/cXZwyH11er+lYdPcGxy+w9fWLaUg83iFkJJrlNaUWaLudDl+ZzAgoXpJ7Fci7mA+RoNCWpsSiGdZutLfmreEWJUm106kmZsfADJLYcwc25aBfkAZV1hW+VipUs0dBgNG595TfIliZt9tJj9Cg0jfvSD71maZYaHSJaYMux2KeQQeAEkT3UWRNHNz6O38Dtnq/G1cb2rwjuz24KXR5k5X8yADaD5EFWMI1tcZ+cwu97hXf3ezr56e6n/Zv3j74b+2d1wa+GoGiUA8nIB6Et910CBjZAVmQQK81gub+iiGZYjUAayaE0lv4BmRW1ZdXwbJMi1/wjq0yChjF9DKfksfRzOk4SKMDKhUSz05J/ZiuljsJ9NJ/QlVb3FSTOoZheAWOSOmSHRT43QP/aE5xI9xc70Puz8pqq8NF7fgO/Xf24h6//u5EDwuHu3/Vs/8lY+af2Ku4QIhoji2vRZX4cBhWyItl76qTW1/1bqClIL7WhhTaakUt+kCg0yQemRx9aZln0yykwP7l993c/7N5fnm/2n798uHvzdDk/PUCS2WV61yCrddnvNdSxB1pHEyBz60t/qhSHPjpqZDMU9rK8t4HhEF88+bJt/7bZv/qFf3vx3W6pf3ogz8Fm3tkH1SzLedWQreCMRkUGcc2sy/cO645AVWaAqWSF5b2aaV3BhGlWo0rQ1/sIsKmLFpd0RS4zdTHPT8HGVy+v7+ih7HZC5wd8fqDD8v5Ubh5QqBcD7WU6LPMjqoDDpwUCh88p0Zf1grfzl+uvt9uHcz5/oLPnP3y2X+mxOaKn4CTXLEMkaeH/Ddw8PgfejtudfvPyBm8J4eez1f/gB8P/N//7fwKlha0A3o4jOwAAAABJRU5ErkJggg==",
  "bcode": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAABzCAIAAAC3jEg6AAAGK0lEQVR4nO3cSWgTfRiA8TeaNGpj6gJWMFZIrVAXKrmIqFiJDT1pUTwIRcEePKQnF0Q81JsH6c1qwZPkUJEKgiLi2rhUBDFipbhUEaVougiKmqaNme8wfCFfE9Ms8yqffX43Z97M/GfoQ9Jp0GYYhgDQMeNPLwD4mxEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoMg+5YTNZkv/p/nVqtTG9G9aZd1Y0NEyd/3qCDmWkfVcqYH0l5e+NmuPlvUIWa80x3Gy7so9k2Nj1svJsav0F+a+0il/tApaW9YZSxaTwjsYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBigiMEARgQGKCAxQRGCAIgIDFBEYoIjAAEUEBiiyGYbxp9cA/LV4BwMUERigiMAARQQGKCIwQBGBAYoIDFBEYIAiAgMUERigiMD+49ChQ7acWltbRWRkZCT3QEooFNq4caPb7Xa73T6f7+jRo69evSroXKbHjx83NjZWVFS43e6GhoaHDx9mLr70mXg8fuHChW3btnm9XqfTWVlZuWvXrkgkUvqNnb4MpDl48GDu2xUMBg3DGB4ezj1g2r9/f+bAkiVLCjqXYRiPHj1yOp3puxwOx927d9NXbsnM2bNnM5fhcDguX76sdMP/egSWS3l5uYhMTExM2m4Glkolq9u3b4tIeXl5Z2fnx48fv3///vz581OnTgUCgYLOZRiGz+cTkebm5k+fPg0NDbW0tIjIqlWrksmktTOhUGjHjh3d3d2vX7/+8eNHX19fIBAQkcWLF2ddGKZEYLmUEtiBAwdEpL29vcRzPXnyREQ8Hk88Hje3TExMeL1eEXnw4IG1M5m+fPnicrlEJBKJ5HkhSMfvYFq+ffsmIjU1NSUeJxwOi0hTU1NZWZm5xW6379y5U0Tu3Llj7Uwmt9ttRphMJku8kOmJwLSsXLlSRDo7O83SimY+FFmzZk36xrq6utQuC2cyxePxd+/ezZs3b/Xq1aVcxbRFYMUbHBzMfPR37do1c29LS0tVVdXVq1erqqp2797d0dHx4sWLIs4yOjoqIpWVlekbFy1alNpl4Uym9vb2r1+/HjlyJPW+h4IQmBaXy9Xb27tnz55YLHb+/PnW1tba2tpNmzb19fUVdJyxsTERKSsrGxwc9Hq9y5Yte/v2rfkwMBaLWTszSTgcbmtrq6+vP3z4cHE3AQRWvKwPORobG9MHzp07Nzo6euPGjba2trq6uvv379fX14+MjOR/llmzZonI+Ph4MplMJBLmE794PC4is2fPtnYm3dOnT5uammpqai5evDhz5syi7hAITN+cOXO2bt16/PjxSCQSDAY/f/7c0dGR/8sXLlwoItFodOnSpe/fv//w4UN1dfXQ0FBql4UzKf39/Q0NDRUVFdevX1+wYEGJd2A6I7Dfx2az7d27V0T6+/vzf9WKFStEZNIHy2fPnqV2WThjevnypd/vdzgct27d8ng8+S8VmQjstzKf182YUcBt37x5s4hcunRpfHzc3JJIJLq7u0Vky5Yt1s6IyMDAgN/vTyQSN2/erK6uLvZC8a/f/He3/5dS/tB8+vTpffv2XblyZWBgIBaLRaPRUChkfhg7c+ZM/ucyDGPt2rUi0tzcHI1Gh4eHzW9g1NbW/vz509qZN2/eeDye+fPn82dlqxBYLrkDy2rDhg3mzMmTJ7MOrFu3bmxsLP9zGYbR29s76TuEdru9p6fH8pljx4796rq6urqKu4fTHB8RtQSDwa6uru3bty9fvtzpdLpcLp/Pd+LEiZ6enkk/5VNav379vXv3AoHA3LlzXS6X3+8Ph8PmRz7LZ2At/mdfQBHvYIAiAgMUERigiMAARQQGKCIwQBGBAYoIDFBEYIAiAgMUERigiMAARQQGKCIwQBGBAYoIDFBEYICifwAnfbNqPTt/mgAAAABJRU5ErkJggg==",
  "success": true
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Если вставить полученный код в строке браузера, напримпр: "Crhome", то в результате получим изображение необходимого кода. Копировать необходимо без скобок, например: <code>data:image/png;base64,iV&#8230;&#8203;&lt;body&gt;&#8230;&#8203;U5ErkJggg==</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Состояние-посылки">Состояние посылки</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/track</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"modified_at" : "&lt;TIMESTAMP UTC&gt;", "code" : "&lt;CODE ID&gt;", "geo" : [ &lt;LATITUDE&gt;, &lt;LONGITUDE&gt;], "success": true, "state_desc" : "&lt;STATE DESCR&gt;"}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/codes/4d52c496-9137-4e8a-bb1b-56f378669ac0" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 11:43:01 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 302<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "ccbb8b78e88fca92e5d705649a731f736f74ee55"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "modified_at": "2018-12-12T10:42:49.430110+00:00",
  "code": "PU0000",
  "geo": [
    0,
    0
  ],
  "success": true,
  "state_desc": "Заявка зарегистрирована в системе"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="История-изменения-состояний">История изменения состояний</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/log</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"&lt;TIMESTAMP UTC&gt;" : {"code" : "&lt;CODE ID&gt;", "geo" : [ &lt;LATITUDE&gt;, &lt;LONGITUDE&gt;], "state_desc" : "&lt;STATE DESCR&gt;"}, &#8230;&#8203;, "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/log/4d52c496-9137-4e8a-bb1b-56f378669ac0" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 11:43:01 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 302<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "ccbb8b78e88fca92e5d705649a731f736f74ee55"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "1542777583615": {
        "code": "PU0001",
        "geo": [
            0,
            0
        ],
        "state_desc": "Отправление принято к доставке"
    },
    "1542880237734": {
        "code": "PU0003",
        "geo": [
            0,
            0
        ],
        "state_desc": "В отделении"
    },
    "1543160738969": {
        "code": "PU0007",
        "geo": [
            0,
            0
        ],
        "state_desc": "Доставлено"
    },
    "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="История-изменения-состояний-всех-посылок">История изменения состояний всех посылок</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>logs</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>ts_from=&lt;TIMESTAMP UTC&gt; [, ts_to=&lt;TIMESTAMP UTC&gt;, state=&lt;PARCEL STATE&gt;]</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"logs": [{"&lt;TIMESTAMP UTC&gt;" : {"code" : "&lt;CODE ID&gt;", "geo" : [ &lt;LATITUDE&gt;, &lt;LONGITUDE&gt;], "state_desc" : "&lt;STATE DESCR&gt;"}, "id": &lt;PARCEL ID&gt;}, {"&lt;TIMESTAMP UTC&gt;" :  {…​}, …​}, …], "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>,</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Временные параметры <code>ts_from</code>, <code>ts_to</code> задаются в формате timestamp UTS <strong>in miliseconds</strong>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/log/logs?ts_from=1542880237734&amp;ts_to=1542880237734&amp;state="PU0007" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 11:43:01 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 302<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "ccbb8b78e88fca92e5d705649a731f736f74ee55"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
"logs": [
        {
            "1544628934289": {
                "code": "PU0007",
                "geo": [
                    0,
                    0
                ],
                "state_desc": "Доставлено"
            },
            "id": "ad0a7e57-5932-4e6f-86c3-c72df9fb317f"
        },
        {
            "1544628989049": {
                "code": "PU0007",
                "geo": [
                    0,
                    0
                ],
                "state_desc": "Доставлено"
            },
            "id": "0d575a34-bc24-4a77-bee7-018657311581"
        },
        {
            "1544628596582": {
                "code": "PU0007",
                "geo": [
                    0,
                    0
                ],
                "state_desc": "Доставлено"
            },
            "id": "fba18a75-e47e-4ca7-b22e-53416baad354"
        }
    ],
    "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Модификация-зарегистрированой-посылки">Модификация зарегистрированой посылки</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>PUT</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/alter</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{ "receiver": { "id": "&lt;MK User ID&gt;", "phone": &lt;PHONE 380XXYYYYYYY&gt;, "email" : "&lt;USER EMAIL&gt;", "first name" : &lt;FIRST NAME&gt;, "last_name": "&lt;LAST NAME&gt;"}, "delivery_type": "&lt;DELIVERY TYPE&gt;", "dest" : [ &lt;LATITUDE&gt;, &lt;LONGITUDE&gt;], "dest_apartment": "&lt;APARTMENT&gt;", "weight" : &lt;WEIGHT GRAM as INTEGER&gt;, "price" : &lt;PRICE as DECIMAL(10,2)&gt;, "cod_amount" : &lt;PRICE as DECIMAL(10,2)&gt;, "type" : "&lt;TYPE CODE&gt;:&lt;CLASS CODE&gt;", "note" : "&lt;USER NOTE&gt;", "contragent_id" : &lt;CONTRAGENT ID&gt;, "dimensions": [&lt;WIDTH&gt;, &lt;HEIGHT&gt;, &lt;DEPTH&gt;], "_comment" : "&lt;SENDER&#8217;s comment&gt;"}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>202 {"success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Все ключи&#8201;&#8212;&#8201;опциональны, некоторые ключи имеют в зависимостях другие ключи: например <code>dest</code> связан с <code>delivery_type</code>, <code>dest_apartment</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Изменения применимы только для состояния <code>Заявка зарегистрирована в системе</code> (<code>state == PU0000</code>)
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X PUT "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/alter/0e1837e3-609f-4bc6-a121-3b21c0f11a5b" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"receiver": { "id": 0, "phone": "380667265627", "email": "bulikj@gmail.com", "first_name" : "Юлия", "last_name": "Верещак"}, "delivery_type": "W2W", "dest": ["50.405237", "30.679338"], "dest_apartment": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253","weight": 145, "price": 125, "cod_amount" : 0, "type": "fragile:A.PRP.NR.NA.S000", "note": "example information", "dimensions": [250, 400, 80], "_comment" : "test parcel"}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 202 Accepted<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 12:15:53 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 17<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "success": true
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Если состояние отправления не позволяет выполнить запрос, будет получена ошибка с кодом <code>409</code> и сообщением {"message":"Inappropriate parcel state","success":false}
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Запрос-на-изменение-посылки-после-принятия-к-доставке">Запрос на изменение посылки после принятия к доставке</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>PUT</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/update</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{ "receiver": { "id": "&lt;MK User ID&gt;", "phone": &lt;PHONE 380XXYYYYYYY&gt;, "email" : "&lt;USER EMAIL&gt;", "first name" : &lt;FIRST NAME&gt;, "last_name": "&lt;LAST NAME&gt;"}, "price" : &lt;PRICE as DECIMAL(10,2)&gt;, "cod_amount" : &lt;PRICE as DECIMAL(10,2)&gt;}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>202 {"success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>receiver</code> опциональный, <code>cod_amount</code> и <code>paid_amount</code> необходимо передавать парой, изменение возможно только в меньшую сторону по сравнению с начальным значением и доступно только для типов отправлений с COD
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Запрос на модификацию возможен в состояних <code>Принято к доставке</code> (<code>state == PU0001</code>) и <code>В отделении</code> (<code>state == PU0003</code>)
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X PUT "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/update/30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"price" : 350, "cod_amount" : 299}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 202 Accepted<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 13:45:30 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 17<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Подтверждение-платежа">Подтверждение платежа</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>POST</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/paid</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{ "amount": &lt;PRICE as DECIMAL(10,2)&gt;, "payment_id": "&lt;ID as STRING&gt;"}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Изменения не применимы для состояния <code>Доставлено</code> (<code>state == PU0007</code>)
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X POST "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/paid/30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"amount": 299, "payment_id": "test0001"}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 13:59:40 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 17<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Установка-времени-хранения-посылки-на-отделении">Установка времени хранения посылки на отделении</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>PUT</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/ttl</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{"ttl_days": &lt;INTEGER&gt;}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>ttl_days</code> возможно передать в диапазоне parcel: <code>additional_data&#8594;&gt;ttl_days</code>, <code>additional_data&#8594;&gt;ttl_days_max OR additional_data&#8594;&gt;ttl_days * 2</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Максимальное время хранения и время хранения по умолчанию задается в настройках erp-токена при создании. Если выполнение запроса завершилось ошибкой с кодом ответа <code>400</code> и сообщением (пример) <code>{"message": "{\"error\":\"ttl_days: not in range 10 20\"}", "success": false}</code> - это значит, что превышено минимальное или максимальное время хранения.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X PUT "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/ttl/30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"ttl_days": 11}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3 6<br>
Date: Wed, 12 Dec 2018 15:30:18 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 17<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Пометка-посылки-к-отмене-на-отделении">Пометка посылки к отмене на отделении</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>PUT</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/mark-cancel</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X PUT "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/mark-cancel/30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 16:09:54 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 17<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Проверка-условий-доставки-для-посылки-перед-регистрацией">Проверка условий доставки для посылки перед регистрацией</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>POST</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/delivery-check</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{"delivery_type": &lt;DELIVERY TYPE&gt;, "dest" : [ &lt;LATITUDE&gt;, &lt;LONGITUDE&gt;], "weight" : &lt;WEIGHT GRAM as INTEGER&gt;, "price" : &lt;PRICE as DECIMAL(10,2)&gt;, "type" : "&lt;TYPE CODE&gt;"}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "transfer_via": "&lt;office_id&gt;", "route_mark": "&lt;mark&gt;"}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
В случае каких-либо ошибок валидации параметров будет возвращен статус 400 с описанием ошибки.<br>
"route_mark" будет отображен при типе доставки "курьерская доставка"
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X POST "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/delivery-check" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"delivery_type": "W2W", "dest" : ["50.405237", "30.679338"], "weight" : 10000, "price" : 23000, "type" : "undef:A.COD.NR.NA.S000"}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 16:34:19 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 73<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "transfer_via": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253",
  "success": true
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Отделения-и-адреса">Отделения и адреса</h3>
<div class="sect3">
<h4 id="Получения-данных-отделений">Получения данных отделений</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>offices</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>&lt;lang&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200
{
    "offices": [
    {
        "id": "&lt;OFFICE ID&gt;",
        "name": "&lt;OFFICE NAME&gt;",
        "descr": "&lt;OFFICE LONG NAME&gt;",
        "number": &lt;OFFICE NUMBER&gt;,
        "phone": "&lt;OFFICE PHONE&gt;",
        "email": "&lt;OFFICE EMAIL&gt;",
        "address": { &lt;ADDRESS SPEC&gt; },
        "address_data": {
            "index": "&lt;POST CODE&gt;",
            "floor": &lt;NUM&gt;,
            &#8230;&#8203;
            &lt;OPTIONAL OTHER DATA&gt;
        },
        "schedule": {
            "1": "&lt;OPEN_TIME-CLOSE_TIME | STATUS&gt;",
            "2": "&lt;OPEN_TIME-CLOSE_TIME | STATUS&gt;",
            &#8230;&#8203;
            "7": "&lt;OPEN_TIME-CLOSE_TIME | STATUS&gt;",
        },
        "optimal_hours": {&lt;OPTIMAL WORKING HOURS&gt;},
        "photos": ["&lt;PHOTO URL&gt;", &#8230;&#8203;],
        "way_photos": ["&lt;PHOTO URL&gt;", &#8230;&#8203;],
        "pay_cash": true|false,
        "pay_card": true|false,
        "additional_data": {
            "sms_addr": "&lt;SMS ADDRESS&gt;",
            "code_prefix": "&lt;OFFICE CODE PREFIX&gt;",
            "label": "&lt;OFFICE LABEL&gt;"
        },
        "ui_address": "&lt;ADDRESS LINE&gt;"
    },
    &#8230;&#8203;..
    ],
    "success": true
}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/offices?lang=ru" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Sat, 15 Dec 2018 13:49:42 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 28454<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "7a90a5c1837fa48d07b1e2a6eb67ebdd2b0540be"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "offices": [
    {
      "address_data": {
        "index": "61161",
        "floor": 1
      },
      "name": "Харьков, Отделение №1",
      "descr": "Харьков, №1. ул. Академика Павлова, 323 (ориентир - автостанция)",
      "schedule": {
        "1": "09:00-21:00",
        "2": "09:00-21:00",
        "3": "09:00-21:00",
        "4": "09:00-21:00",
        "5": "09:00-21:00",
        "6": "09:00-21:00",
        "7": "09:00-21:00"
      },
      "optimal_hours": {},
      "number": 1,
      "photos": [],
      "id": "93ccfdec-f886-4f1c-9d04-6d1d8ef502f3",
      "pay_cash": true,
      "phone": "380112000001",
      "email": "harkov_1@tbt-post.net",
      "way_photos": [],
      "address": {
        "lang": "ru",
        "city": "Харьков",
        "building": "323",
        "area": "Харьковский городской совет",
        "country": "UA",
        "region": "Харьковская область",
        "lon": 36.337401,
        "geo_object": {},
        "addr_type": "cc_office",
        "note": "№1",
        "modified_at": "2017-06-15T11:10:02.140775+00:00",
        "street": "улица Академика Павлова",
        "geo_source": "yandex",
        "lat": 50.027012,
        "id": "2d741b70-51bb-11e7-b609-0fc3a07cbedf",
        "accuracy": "exact"
      },
      "services": [],
      "additional_data": {
        "label": "Харьков-1",
        "code_prefix": "TJ",
        "sms_addr": "Harkov, ul. Akademika Pavlova 323, 09:00-21:00"
      },
      "ui_address": "м.Харків, вулиця Академіка Павлова 323",
      "pay_card": false
    },
    {
      "address_data": {
        "index": "03150",
        "place": "ст. м. Бориспольская, БЦ modnaVilla",
        "floor": 1
      },
      "name": "Киев, Отделение №1",
      "descr": "№1. Харьковское шоссе, 201/203, БЦ modnaVilla, 1 этаж",
      "schedule": {
        "1": "09:00-21:00",
        "2": "09:00-21:00",
        "3": "09:00-21:00",
        "4": "09:00-21:00",
        "5": "09:00-21:00",
        "6": "09:00-21:00",
        "7": "09:00-21:00"
      },
      "optimal_hours": {},
      "number": 1,
      "photos": [
        "csc_photos/4a3ad637c9ab45d0a034d2b3d8abae6b.jpg"
      ],
      "id": "26b10dbb-4f1b-4d45-9c19-ec3cb85d4253",
      "pay_cash": true,
      "phone": "380110000001",
      "email": "kiev_1@tbt-post.net",
      "way_photos": [],
      "address": {
        "lang": "ru",
        "city": "Киев",
        "building": "201-203к1А",
        "area": null,
        "country": "UA",
        "region": "Киев",
        "lon": 30.679338,
        "geo_object": {},
        "addr_type": "cc_office",
        "note": "№1",
        "modified_at": "2016-10-04T10:33:54.383917+00:00",
        "street": "Харьковское шоссе",
        "geo_source": "yandex",
        "lat": 50.405237,
        "id": "0c722922-8a1e-11e6-8a66-b356fd9f196a",
        "accuracy": "exact"
      },
      "services": [],
      "additional_data": {
        "code_prefix": "T1",
        "label": "Киев-1"
      },
      "ui_address": "м.Київ, Харківське шосе 201-203к1А",
      "pay_card": false
    }
  ],
  "success": true
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
В теле json ответа в указанном примере включены не все отделения.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="Получение-данных-адреса-из-справочника">Получение данных адреса из справочника</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>address</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>&lt;lang, &lt;lat,lon&gt; | &lt;region,city,street,building&gt;&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "lang": "&lt;LANG&gt;", "city": "&lt;CITY&gt;", "building": "&lt;BUILDING&gt;", "area": "&lt;ADDRESS AREA or null&gt;", "country": "&lt;COUNTRY CODE&gt;", "region": "&lt;CITY REGION or null&gt;", "lon": &lt;LONGITUDE&gt;, "lat": &lt;LONGITUDE&gt;, "id": "&lt;SHIPPING ADDRESS ID&gt;", "note": "&lt;TEXT or null&gt;", "modified_at": "&lt;TIMESTAMP UTC&gt;", "street": "&lt;STREET&gt;", "addr_type": "&lt;TYPE ID&gt;", "accuracy": "&lt;ADDRESS ACCURACY&gt;", "geo_source": "&lt;google|yandex|osm&gt;", "geo_object": {&lt;ADDITIONAL GEO DATA&gt;}}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
в качестве get-параметров указывается <em>либо</em> пара гео-координат, <em>либо</em> cоставные части адреса <code>region</code>, <code>city</code>, <code>street</code>, <code>building</code>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/address?region=%D0%9A%D0%B8%D0%B5%D0%B2&amp;city=%D0%9A%D0%B8%D0%B5%D0%B2&amp;street=%D0%A5%D0%B0%D1%80%D1%8C%D0%BA%D0%BE%D0%B2%D1%81%D0%BA%D0%BE%D0%B5%20%D1%88%D0%BE%D1%81%D1%81%D0%B5&amp;building=201-203"\
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Sat, 15 Dec 2018 14:53:29 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 525<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "252fb40a97403595bcea1297618cb1432d54adb7"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "lang": "uk",
  "city": "Київ",
  "building": "201/203",
  "success": true,
  "area": "місто Київ",
  "country": "UA",
  "region": null,
  "lon": 30.6817834,
  "geo_object": {},
  "id": "afea6db6-0074-11e9-a8b4-1f50ad4e3573",
  "note": null,
  "modified_at": "2018-12-15T14:21:17.909359+00:00",
  "street": "Харківське шосе",
  "geo_source": "google",
  "lat": 50.4035667,
  "addr_type": "regular",
  "accuracy": "exact"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Используемое кодирование для кирилицы в запросе - UTF-8<br>
В ответе - текст закодированный функцией escape
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Пользователи">Пользователи</h3>
<div class="sect3">
<h4 id="Регистрация-пользователя">Регистрация пользователя</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>POST</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/user/new</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{ "email": "&lt;EMAIL&gt;", "phone": "&lt;PHONE&gt;", "first_name": "&lt;FIRST NAME&gt;", "last_name": "&lt;LAST NAME&gt;", "gender": "male|female|undef", "birthday": "1970-01-01", "company": { "name": "&lt;COMPANY NAME&gt;", "reg_id": "&lt;REG ID&gt;", "tax_id": "&lt;TAX ID&gt;", "type": "company|pe" } }</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 { "user_id": "&lt;USER ID&gt;", "success": true }</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X POST "https://sandbox-api.tbt-post.net/api/v1/agent/user/new" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{ "email": "example@gmail.com", "phone": "380666666666", "first_name": "test", "last_name": "user", "gender": "undef", "birthday": "1980-01-01", "company": { "name": "TestCompany", "reg_id": "12345", "tax_id": "321654", "type": "company" } }'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Thu, 20 Dec 2018 14:40:11 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 68<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "user_id": "cf8b0967-f1d3-4e53-aa48-297940415263",
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Поиск-пользователя">Поиск пользователя</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">protocol_method</dt>
<dd>
<p>GET</p>
</dd>
<dt class="hdlist1">method_name</dt>
<dd>
<p>agent/user/find</p>
</dd>
<dt class="hdlist1">get_params</dt>
<dd>
<p>phone, reg_id, tax_id, company</p>
</dd>
<dt class="hdlist1">request_body</dt>
<dd>
<p>----</p>
</dd>
<dt class="hdlist1">expected_result</dt>
<dd>
<p>200 {"users": [{"first_name": "&lt;FIRST NAME&gt;", "last_name": "&lt;LAST NAME&gt;", "company": {"name": "&lt;COMPANY NAME&gt;", "modified_at": "2018-07-10T09:15:52.366826+00:00", "reg_id": "&lt;REG ID&gt;", "type": "company", "tax_id": "&lt;TAX ID&gt;"}, "email": "&lt;EMAIL&gt;", "phone": "PHONE", "id": "&lt;USER ID&gt;"}], "success": true}</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/user/find?phone=380666666666&amp;reg_id=12345&amp;tax_id=321654&amp;company=TestCompany" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Mon, 24 Dec 2018 18:21:05 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 319<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "9c6365dc6d23240c8fa56d9677d5e9ac2f99644f"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "users": [
    {
      "first_name": "test",
      "last_name": "user",
      "company": {
        "reg_id": "12345",
        "modified_at": "2018-12-20T14:40:10.979426+00:00",
        "type": "company",
        "name": "TestCompany",
        "tax_id": "321654"
      },
      "email": "example@gmail.com",
      "phone": "380666666666",
      "id": "cf8b0967-f1d3-4e53-aa48-297940415263"
    }
  ],
  "success": true
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Контрагенты">Контрагенты</h3>
<div class="sect3">
<h4 id="Регистрация-контрагента">Регистрация контрагента</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>POST</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/contragent</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{"name": "&lt;CONTRAGENT NAME&gt;", "reg_id": "&lt;REGISTRATION ID&gt;", "tax_id": "&lt;TAX ID&gt;", "vat": &lt;VALUE ADDED TAX (INT(%))&gt;, "bank_name": "&lt;BANK NAME&gt;", "bank_mfo": "&lt;BANK MFO CODE&gt;", "bank_account": "&lt;ACCOUNT ID&gt;"}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"id" : "&lt;CONTRAGENT ID&gt;", "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Параметры: <code>reg_id</code>&#8201;&#8212;&#8201;код ЕДРПОУ контрагента, <code>tax_id</code>&#8201;&#8212;&#8201;ИНН контрагента, <code>vat</code> - ставка НДС в процентах. <code>vat == 0</code>&#8201;&#8212;&#8201;эквивалент <code>без НДС</code>.</p>
</div>
<div class="paragraph">
<p>После регистрации контрагента, необходим запрос почтой на его активацию.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X POST "https://sandbox-api.tbt-post.net/api/v1/agent/contragent" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"name": "TestAgent LLC", "reg_id": "65465465", "tax_id": "545468", "vat": 15, "bank_name": "ExampleInternational", "bank_mfo": "358697", "bank_account": "2168777"}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Wed, 12 Dec 2018 12:41:38 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 63<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "id": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
  "success": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Модификация-контрагента">Модификация контрагента</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>PUT</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/contragent</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;CONTRAGENT ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>{"name": "&lt;CONTRAGENT NAME&gt;", "reg_id": "&lt;REGISTRATION ID&gt;", "tax_id": "&lt;TAX ID&gt;", "vat": &lt;VALUE ADDED TAX (INT(%))&gt;, "bank_name": "&lt;BANK NAME&gt;", "bank_mfo": "&lt;BANK MFO CODE&gt;", "bank_account": "&lt;ACCOUNT ID&gt;"}</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Все ключи являются опциональными
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
После модификации контрагента сбрасывается статус активации, и необходимо отправлять запрос активации заново
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X PUT "https://sandbox-api.tbt-post.net/api/v1/agent/contragent/e8459d69-e3bc-41bc-978d-28d6c6abda38" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk" \
-d '{"name": "Testcontragent LLC"}'</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Thu, 20 Dec 2018 14:59:25 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 17<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{"success": true}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Информация-о-контрагенте">Информация о контрагенте</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/contragent</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;CONTRAGENT ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "name": "&lt;CONTRAGENT NAME&gt;", "reg_id": "&lt;REGISTRATION ID&gt;", "tax_id": "&lt;TAX ID&gt;", "vat": &lt;VALUE ADDED TAX INT(%)&gt;, "bank_name": "&lt;BANK NAME&gt;", "bank_mfo": "&lt;BANK MFO CODE&gt;", "bank_account": "&lt;ACCOUNT ID&gt;", "enabled": &lt;true|false&gt;, "modified_at": &lt;TIMESTAMP UTC&gt;, "translations": [{"processor": &lt;POS PROCESSOR&gt;, "merchant_id": &lt;POS MERCHANT ID&gt;, {&#8230;&#8203;}, &#8230;&#8203;}]}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/contragent/e8459d69-e3bc-41bc-978d-28d6c6abda38" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Thu, 20 Dec 2018 15:07:04 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 366<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "6f7149e70c1636e6270cd910279fc2e05f8abdb7"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bank_name": "ExampleInternational",
  "vat": 15,
  "user_id": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
  "name": "Testcontragent LLC",
  "success": true,
  "modified_at": "2018-12-20T14:59:25.552359+00:00",
  "translations": null,
  "id": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
  "reg_id": 65465465,
  "bank_mfo": 358697,
  "bank_account": 2168777,
  "enabled": false,
  "tax_id": 545468
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Справочник-контрагентов">Справочник контрагентов</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/contragent</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>list</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"contragents": [{&lt;CONTRAGENT SPEC&gt;}, &#8230;&#8203;], "success": true}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/contragent/list" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
&lt; Server: nginx/1.10.3<br>
&lt; Date: Sun, 23 Dec 2018 17:02:51 GMT<br>
&lt; Content-Type: application/json; charset=utf-8<br>
&lt; Content-Length: 334<br>
&lt; Connection: keep-alive<br>
&lt; Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
&lt; Access-Control-Max-Age: 600<br>
&lt; Etag: "729c4673864e1837373a30078de20909fec609ec"<br>
&lt; Access-Control-Allow-Credentials: true<br>
&lt; Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
&lt; Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "contragents": [
    {
      "bank_name": "ExampleInternational",
      "vat": 15,
      "name": "Testcontragent LLC",
      "modified_at": "2018-12-20T15:14:48.007045+00:00",
      "translations": null,
      "id": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
      "reg_id": 65465465,
      "bank_mfo": 358697,
      "bank_account": 2168777,
      "enabled": false,
      "tax_id": 545468
    },
    {
      "bank_name": "ExampleInternational2",
      "vat": 1,
      "name": "Testcontragent2 LLC",
      "modified_at": "2018-12-20T15:14:48.007045+00:00",
      "translations": null,
      "id": "e8459d69-e3bc-41bc-978d-28d6c6abda39",
      "reg_id": 65465447,
      "bank_mfo": 778697,
      "bank_account": 9968777,
      "enabled": false,
      "tax_id": 545668
    }
  ],
  "success": true
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Финансовые-транзакции">Финансовые транзакции</h3>
<div class="sect3">
<h4 id="Получение-финансовой-транзакции-по-id">Получение финансовой транзакции по id</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/fin-transaction</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;TRANSACTION ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "id": "&lt;TRANSACTION ID&gt;", "sender": "&lt;SENDER USER ID&gt;", "contragent": "&lt;CONTRAGENT ID&gt;", "processor": "&lt;POS PROCESSOR TYPE&gt;", "amount": &lt;PRICE as DECIMAL(10,2), "trans_type": "&lt;TRANSACTION TYPE: parcel|p2p&gt;", "trans_ref": "&lt;PARCEL ID&gt;", "addidional_data": {"id": &lt;POSORDER ID&gt;, &#8230;&#8203; &lt; OTHER SPECIFIC DATA &gt;}, "created_at": &lt;TIMESTAMP UTC&gt;, "modified_at": &lt;TIMESTAMP UTC&gt;, "completed_at": &lt;TIMESTAMP UTC&gt;, "is_completed": true|false, "is_appiled": true|false}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
На данный момент существуют только транзакции с <code>trans_type == "parcel"</code>, в таком случае <code>trans_ref</code> ссылается на <code>&lt;PARCEL ID&gt;</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>processor</code> на данный момент может быть: <code>fcs_term</code> - оплата через терминал, <code>_erp_api</code> - оплата через вызов API <strong>agent/parcel/paid</strong>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/fin-transaction/9060af07-169c-4376-ac18-20d073123180" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Mon, 24 Dec 2018 21:17:20 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 535<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "30a9ee68f228a07a6164fcd90b1063c9f29e1e3d"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "is_applied": false,
  "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
  "success": true,
  "created_at": "2018-12-23T17:54:18.385932+00:00",
  "contragent": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
  "modified_at": "2018-12-23T17:54:18.429628+00:00",
  "processor": "_erp_api",
  "completed_at": "2018-12-23T17:54:18.385932+00:00",
  "amount": 299,
  "trans_type": "parcel",
  "id": "9060af07-169c-4376-ac18-20d073123180",
  "trans_ref": "30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2",
  "additional_data": {
    "id": "test0004"
  },
  "extid": 166,
  "is_completed": true
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Получение-списка-финансовых-транзакций-за-период">Получение списка финансовых транзакций за период</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/fin-transactions</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>ts_from=&lt;TIMESTAMP UTC&gt; [, ts_to=&lt;TIMESTAMP UTC&gt;, processor=fcs_term|_erp_api, contragent=&lt;CONTRAGENT ID&gt;, is_dirty=true limit=200, offset=0]</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "transactions": [{&lt;TRANSACTION SPEC&gt;}, {&lt;TRANSACTION SPEC&gt;}, &#8230;&#8203;], "total": &lt;INTEGER&gt;}</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Временные параметры <code>ts_from</code>, <code>ts_to</code> задаются в формате timestamp UTS <strong>in miliseconds</strong>. Параметр <code>is_dirty</code> указывает на получение транзакций, которые не синхронизированы с агентской системой в связи с какими-либо ошибками.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/fin-transactions?ts_from=1543688645000&amp;ts_to=1546194245000&amp;processor=_erp_api&amp;limit=200&amp;offset=0" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Mon, 24 Dec 2018 21:26:20 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 3167<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "67f37817137afc911ea493d829aacb0dc20cc9ec"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "total": 2,
  "success": true,
  "transactions": [
    {
      "is_applied": false,
      "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "created_at": "2018-12-23T17:44:09.971429+00:00",
      "contragent": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
      "modified_at": "2018-12-23T17:44:10.162860+00:00",
      "processor": "_erp_api",
      "completed_at": "2018-12-23T17:44:09.971429+00:00",
      "amount": 299,
      "trans_type": "parcel",
      "id": "17a4e31d-4758-4d4e-8700-135bfa91fdad",
      "trans_ref": "30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2",
      "additional_data": {
        "id": "TEST0001"
      },
      "extid": 163,
      "is_completed": true
    },
    {
      "is_applied": false,
      "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "created_at": "2018-12-12T13:59:40.263358+00:00",
      "contragent": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
      "modified_at": "2018-12-12T13:59:40.265089+00:00",
      "processor": "_erp_api",
      "completed_at": "2018-12-12T13:59:40.263358+00:00",
      "amount": 299,
      "trans_type": "parcel",
      "id": "5555b600-0b58-45fa-8183-2e901d476018",
      "trans_ref": "30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2",
      "additional_data": {
        "id": "test0001"
      },
      "extid": 162,
      "is_completed": true
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Получение-списка-финансовых-транзакций-по-посылке">Получение списка финансовых транзакций по посылке</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
protocol_method
</td>
<td class="hdlist2">
<p>GET</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_name
</td>
<td class="hdlist2">
<p>agent/parcel/fin-transactions</p>
</td>
</tr>
<tr>
<td class="hdlist1">
method_params
</td>
<td class="hdlist2">
<p>&lt;PARCEL ID&gt;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
get_params
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
request_body
</td>
<td class="hdlist2">
<p>----</p>
</td>
</tr>
<tr>
<td class="hdlist1">
expected_result
</td>
<td class="hdlist2">
<p>200 {"success": true, "transactions": [{&lt;TRANSACTION SPEC&gt;}, {&lt;TRANSACTION SPEC&gt;}, &#8230;&#8203;]}</p>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Пример запроса/ответа</dt>
<dt class="hdlist1">Запрос</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -v -X GET "https://sandbox-api.tbt-post.net/api/v1/agent/parcel/fin-transactions/30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2" \
-H "Content-Type: application/json" \
-H "Authorization: Basic dG9rZW46cGFzc3dk"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ответ</dt>
<dd>
<p>HTTP/1.1 200 OK<br>
Server: nginx/1.10.3<br>
Date: Mon, 24 Dec 2018 18:24:57 GMT<br>
Content-Type: application/json; charset=utf-8<br>
Content-Length: 2635<br>
Connection: keep-alive<br>
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,OPTIONS<br>
Access-Control-Max-Age: 600<br>
Etag: "df09d5fee730bd0a96873d24ac60d6cc806e8d1b"<br>
Access-Control-Allow-Credentials: true<br>
Access-Control-Allow-Origin: <a href="https://sandbox-ui.tbt-post.net" class="bare">https://sandbox-ui.tbt-post.net</a><br>
Access-Control-Allow-Headers: Content-Type<br></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "success": true,
  "transactions": [
    {
      "is_applied": false,
      "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "created_at": "2018-12-23T17:54:18.385932+00:00",
      "contragent": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
      "modified_at": "2018-12-23T17:54:18.429628+00:00",
      "processor": "_erp_api",
      "completed_at": "2018-12-23T17:54:18.385932+00:00",
      "amount": 299,
      "trans_type": "parcel",
      "id": "9060af07-169c-4376-ac18-20d073123180",
      "trans_ref": "30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2",
      "additional_data": {
        "id": "test0004"
      },
      "extid": 166,
      "is_completed": true
    },
    {
      "is_applied": false,
      "sender": "44ee4ac5-8e42-4e40-821a-3f3e5f13f680",
      "created_at": "2018-12-23T17:44:19.445261+00:00",
      "contragent": "e8459d69-e3bc-41bc-978d-28d6c6abda38",
      "modified_at": "2018-12-23T17:44:19.445966+00:00",
      "processor": "_erp_api",
      "completed_at": "2018-12-23T17:44:19.445261+00:00",
      "amount": 299,
      "trans_type": "parcel",
      "id": "b26e547f-c7be-43b6-8dae-9ef8258f0b84",
      "trans_ref": "30ca60d8-7d9b-47b3-a7b7-e40ff2fdefd2",
      "additional_data": {
        "id": "TEST0003"
      },
      "extid": 165,
      "is_completed": true
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>


      </section>
      <footer>
        
        <p>This project is maintained by <a href="http://github.com/blackforest6230">blackforest6230</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
    
  </body>
</html>
